@{
    var themes = new[] { "cerulean", "cosmo", "cyborg", "darkly", "flatly", "journal", "litera", "lumen", "lux", "materia", 
        "minty", "pulse", "sandstone", "simplex", "sketchy", "slate", "solar", "spacelab", "superhero", "united", "yeti" };
    var selectedTheme = this.Context.Request.Query.TryGetValue("theme", out var theme) ? theme.ToString() : "lux";

    var images = new[] { "none", "8", "9", "10", "11", "12", "13", "14", "16", "17" };
    var selectedImage = this.Context.Request.Query.TryGetValue("image", out var image) ? image.ToString() : "none";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Topsis</title>
    
    <environment include="Development">@*
        <link rel="stylesheet" href="~/lib/bootstrap/css/bootstrap.css" />*@
       @*<link href="~/lib/bootswatch/minty/bootstrap.min.css" rel="stylesheet" />*@
        @*<link href="~/lib/bootswatch/lux/bootstrap.min.css" rel="stylesheet" />*@
        <link href="~/lib/bootswatch/@(selectedTheme)/bootstrap.min.css" rel="stylesheet" />
        <link rel="stylesheet" href="~/css/site.css" />
    </environment>
    <environment exclude="Development">
        @*<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/4.6.0/css/bootstrap.min.css"
              asp-fallback-href="~/lib/bootstrap/css/bootstrap.min.css"
              asp-fallback-test-class="sr-only" asp-fallback-test-property="position"
              asp-fallback-test-value="absolute" />*@

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/@(selectedTheme)/bootstrap.min.css"
              integrity="sha384-3fdgwJw17Bi87e1QQ4fsLn4rUFqWw//KU0g8TvV6quvahISRewev6/EocKNuJmEw" 
            crossorigin="anonymous"
              asp-fallback-href="~/lib/bootswatch/@(selectedTheme)/bootstrap.min.css"
              asp-fallback-test-class="sr-only" asp-fallback-test-property="position"
              asp-fallback-test-value="absolute">
        <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />
    </environment>

    @if (string.IsNullOrEmpty(selectedImage) == false && selectedImage != "none")
    {
        <style>
            .jumbotron {
                background-image: url("https://picsum.photos/id/@(selectedImage)/1600/800");
                background-size: cover;
            }
        </style>
    }
</head>
<body>
    <mini-profiler />
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3">
            <div class="container">
                <a class="navbar-brand" asp-area="" asp-page="/Index">Home</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
                    <partial name="_LoginPartial" />
                    <ul class="navbar-nav flex-grow-1">

                        @if (User.IsInRole(Topsis.Domain.Contracts.RoleNames.Moderator))
                        {
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="Moderator" asp-page="/Workspaces/Index">Workspaces</a>
                            </li>
                        }

                        @if (User.IsInRole(Topsis.Domain.Contracts.RoleNames.Stakeholder))
                        {
                            <li class="nav-item">
                                <a class="nav-link text-dark" asp-area="Guest" asp-page="/Index">Guest Account</a>
                            </li>
                        }

                        <li class="nav-item">
                           
                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Theme: @selectedTheme
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                    @foreach (var item in themes)
                                    {
                                        <a class="dropdown-item theme-button" href="#" data-theme="@item">@item</a>
                                    }
                                </div>
                            </div>
                        </li>

                        <li class="nav-item">

                            <div class="dropdown">
                                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonImage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    Image: @selectedImage
                                </button>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuButtonImage">
                                    @foreach (var item in images)
                                    {
                                        <a class="dropdown-item image-button" href="#" data-image="@item">@item</a>
                                    }
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">Welcome to APOLLO-Live</h1>
            <p class="lead">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
            <hr class="my-4">
            <p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
            <p class="lead">
                <a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
            </p>
        </div>
    </div>

    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="border-top footer text-muted">
        <div class="container">
            <div class="row mt-3">
                <div class="col-md-4">
                    
                    <img src="~/img/eu-flag.png" />
                   
                </div>
                <div class="col-md-4">
                    <h3>Map</h3>
                    <a asp-area="" asp-page="/Index">Home</a><br />
                    <a asp-area="Guest" asp-page="/Index">Guest Account</a>
                </div>
                
                <hr />
                <div class="col-md-2 offset-10">
                    <p>&copy; 2021 - APOLLO-Live</p>
                </div>
            </div>
        </div>
    </footer>

    <environment include="Development">
        <script src="~/lib/jquery/jquery.js"></script>
        <script src="~/lib/bootstrap/js/bootstrap.js"></script>
        <script src="~/js/site.js" asp-append-version="true"></script>
    </environment>
    <environment exclude="Development">
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.6.0.min.js"
                asp-fallback-src="~/lib/jquery/jquery.min.js"
                asp-fallback-test="window.jQuery"
                crossorigin="anonymous"
                integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/bootstrap/4.6.0/bootstrap.min.js"
                asp-fallback-src="~/lib/bootstrap/js/bootstrap.min.js"
                asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal"
                crossorigin="anonymous"
                integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"></script>
        <script src="~/js/site.min.js" asp-append-version="true"></script>
    </environment>

    @RenderSection("Scripts", required: false)
    <script type="text/javascript">
        function getQueryParams(url) {
            const paramArr = url.slice(url.indexOf('?') + 1).split('&');
            const params = {};
            paramArr.map(param => {
                const [key, val] = param.split('=');
                params[key] = decodeURIComponent(val);
            })
            return params;
        }

        function reload(theme, image){
            let params = getQueryParams(document.URL);
            theme = theme || params['theme'] || 'lux';
            image = image || params['image'] || 'none';

            let url = document.URL.split('?')[0];
            var newUrl = `${url}?theme=${theme}&image=${image}`;
            document.location = newUrl;
        }

        $(document).ready(function () {
            $(".theme-button").click(function () {
                let theme = $(this).data('theme');
                reload(theme, undefined);
            });

            $(".image-button").click(function () {
                let image = $(this).data('image');
                reload(undefined, image);
            });
        });
    </script>
</body>
</html>
